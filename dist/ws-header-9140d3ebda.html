<template>
    <!-- inject:html -->
    <div class="refills-patterns refills-components">
  <header class="navigation" role="banner">
    <div class="navigation-wrapper">
      <content select=".logo">
        <!-- Logo -->
      </content>
      <a href="javascript:void(0)" class="navigation-menu-button" id="js-mobile-menu">MENU</a>
      <nav role="navigation">
        <ul id="js-navigation-menu" class="navigation-menu show">
          <content select=".nav-link">
            <!-- Additional Items -->
          </content>
          <li class="nav-link more dropdown-menu">
            <a href="javascript:void(0)">
              <span id="selectedLanguageFlag" class="flag"></span>
              <span id="selectedLanguage"></span>
            </a>
            <ul class="submenu" id="languages">
            </ul>
          </li>
          <li class="nav-link" id="loggedInInfo">
          </li>
        </ul>
      </nav>
    </div>
  </header>
</div>
    <!-- endinject -->
    <style>
        /* inject:styles */
        @charset "UTF-8";html{box-sizing:border-box}*,:after,:before{box-sizing:inherit}.flag{display:inline-block;width:16px;height:11px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAWCAYAAAChWZ5EAAAACXBIWXMAAA7EAAAOxAGVKw4bAAADuUlEQVRIibWVXWjWdRTHP/9nz6KYVG5Ggk4x3NLCUS41bEtZvlCkqwulUClNHNJFgUTtIswmUQoaEolgoxvR0JQIJS8ctCE6kprLlyYbilFT2sqs+f+9ntPF88wRCF38nw4czuH3wvmcL/zOL1FVstiyZYuUmIIIlOVxQXA+oOIB+c/7+UzVAe9TNm16GwARQUSIMRDjaAyEUHTvCTEQgsd7z+HDB7MD5HI5AE539xYKhID3Hucczjqss1g75sYYrDE0v9AElECBauB+EaqLxYNzBO/x1uKtxTmHNwZnDdZafGqwzjIx+NIAvOQt9TFS7z3qHDoarUWtRYxFrCnmBk0t4gzlPpAvBYB6h8YIzqHOo9agziG3AYrFrUXS9DaUeoeWBAAghn937RxqDGLMGEiaos4SjS2cjZ5YCgA/H6hVtEzQKIgXxMfbuQYtRohe0QDiFX0iwXSVQoE60MmCjo+IFFwlIjGgIoiEwvOMEYlaXAOtSpDFJQDAgQYP5bPJ4UgkouJIJIB6VCIqHpWAakQ1oBrABXIjkGSdhEd2PqZ3RxAHWgY2Lcw/vRdyBiSCK4PoCnl5DsQAZXDTQbJrT4fWNtTR1XmJ60MAkSiRd1bP4twHn6AxMuvdN3hzRzfqc4zcMlTX3ENTzzEuP7+SrevmJ1kayFfeN46l/R0saVnBwM8jnPphkKgJNdMqqX28ApxFp1Xy7NxqfIg0PFrFnM49cGgbu45ezKQeQK6jP+XExEUk+w8w/Uo3a5qnMzhoSRLg7AD09pMkcHVYaSnvp67rAMlbbXz+ZR8fvX86OwDAL4N/sHmojqvxIWLbe7RufKSwm/4FaQrA9su7qVjSQN+L62h67gDnfrqJsTYzAH0Dwyqid7YVK1SXL7/jlojqmQvXVVXJ4vkft35M7ewKONsP3oNzY1EEtZawcGFhvHqPOAcxkp8xieNn/qb+ysn/UYHGRg1znxztWVVVY4waYlAfgnafv5ZZgdyGLSfZ0d7DqpbjnL9wA34fxq1/FQAdKXweBVN+faaJzr3fMHlKOy+v/5p5T7dl6x7IGRN4sOou9u1ZytRDO/nzs3ZeG98CUPhInANVnlq4nwknOpiTXKNncSd1c6aChOwAq9fUsKp5BubDVnoXrGHLrXlUjouoQjJzEsnMiagq1Q9XsvqVQ3TNbOSBvXvZ+N1mXl/bmBkgP/jbMJ8u2cCRmgV8v+9bfEgJMbJ2ZQ3HTt1AQ2DpxSG++OoESOTg0U4mTBlP6/ZtXGrdDazKBPAP38BUStCEE90AAAAASUVORK5CYII=");background-position:0 0;background-repeat:no-repeat}.flag.flag-de{background-position:-16px 0}.flag.flag-en{background-position:0 -11px}header.navigation{background-color:#333;border-bottom:1px solid #1a1a1a;min-height:60px;width:100%;z-index:1}header.navigation .navigation-wrapper{max-width:1200px;margin-left:auto;margin-right:auto;position:relative;z-index:2}header.navigation .navigation-wrapper:after{clear:both;content:"";display:table}header.navigation .logo{float:left;max-height:60px;padding-left:1em;padding-right:2em}header.navigation .navigation-menu-button{color:hsla(0,0%,100%,.7);display:block;float:right;line-height:60px;margin:0;padding-right:1em;text-decoration:none;text-transform:uppercase}@media screen and (min-width:53.75em){header.navigation .navigation-menu-button{display:none}}header.navigation .navigation-menu-button:focus,header.navigation .navigation-menu-button:hover{color:#fff}header.navigation nav{float:none;min-height:60px;z-index:3}@media screen and (min-width:53.75em){header.navigation nav{float:left}}header.navigation ul.navigation-menu{clear:both;display:none;margin:0 auto;overflow:visible;padding:0;width:100%;z-index:2}header.navigation ul.navigation-menu.show{display:block}@media screen and (min-width:53.75em){header.navigation ul.navigation-menu{display:inline;margin:0;padding:0}}header.navigation ul li.nav-link{background:#333;display:block;line-height:60px;overflow:hidden;padding-right:.8em;text-align:right;width:100%;z-index:2;cursor:pointer;color:hsla(0,0%,100%,.7)}header.navigation ul li.nav-link:hover{color:#fff}@media screen and (min-width:53.75em){header.navigation ul li.nav-link{background:transparent;display:inline;line-height:60px;text-decoration:none;width:auto}}header.navigation ul li.nav-link a{color:hsla(0,0%,100%,.7);display:inline-block;text-decoration:none;box-sizing:content-box}@media screen and (min-width:53.75em){header.navigation ul li.nav-link a{padding-right:1em}}header.navigation ul li.nav-link a:focus,header.navigation ul li.nav-link a:hover{color:#fff}header.navigation ul li.nav-link a:after{position:relative !important}header.navigation li.more.nav-link{padding-right:0}@media screen and (min-width:53.75em){header.navigation li.more.nav-link{padding-right:1em}}header.navigation li.more.nav-link>ul>li:first-child a{padding-top:1em}header.navigation li.more.nav-link a{margin-right:1em}header.navigation li.more.nav-link>a{padding-right:.6em}header.navigation li.more.nav-link>a:after{position:absolute;top:auto;right:-.4em;bottom:auto;left:auto;content:'\25BE';color:hsla(0,0%,100%,.7)}header.navigation li.more{overflow:visible;padding-right:0}header.navigation li.more a{padding-right:.8em}header.navigation li.more>a{padding-right:1.6em;position:relative}@media screen and (min-width:53.75em){header.navigation li.more>a{margin-right:1em}}header.navigation li.more>a:after{content:'â€º';font-size:1.2em;position:absolute;right:.5em}header.navigation li.more:focus>.submenu,header.navigation li.more:hover>.submenu{display:block}@media screen and (min-width:53.75em){header.navigation li.more{padding-right:.8em;position:relative}}header.navigation .dropdown-menu .flag{margin-top:25px}header.navigation ul.submenu{display:none;padding-left:0}@media screen and (min-width:53.75em){header.navigation ul.submenu{left:-1em;position:absolute;top:1.5em}}@media screen and (min-width:53.75em){header.navigation ul.submenu .submenu{left:11.8em;top:0}}header.navigation ul.submenu li{display:block;padding-right:0}@media screen and (min-width:53.75em){header.navigation ul.submenu li{line-height:46.15385px}header.navigation ul.submenu li:first-child>a{border-top-left-radius:4px;border-top-right-radius:4px}header.navigation ul.submenu li:last-child>a{border-bottom-left-radius:4px;border-bottom-right-radius:4px;padding-bottom:.7em}}header.navigation ul.submenu li a{background-color:#2b2b2b;display:inline-block;text-align:right;width:100%;padding-top:0 !important}@media screen and (min-width:53.75em){header.navigation ul.submenu li a{background-color:#333;padding-left:1em;text-align:left;width:12em}}header.navigation #loggedInInfo a{margin-right:1em}header.navigation #loggedInInfo #logOutButton{margin-left:.5em;width:1em;height:1em;vertical-align:middle;zoom:1.5}header.navigation #loggedInInfo #logOutButton #logOutIcon{height:100%;background-color:#fff;-webkit-mask-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M48.501 27.015a1.5 1.5 0 0 0 1.5 1.5h21.486v42.974H50.001a1.5 1.5 0 1 0 0 3h22.986a1.5 1.5 0 0 0 1.5-1.5V27.013a1.5 1.5 0 0 0-1.5-1.5H50.001c-.829.002-1.5.674-1.5 1.502zm-.028 11.432c0 .384.146.768.438 1.061l8.964 8.963h-30.86a1.5 1.5 0 1 0 0 3h30.86l-8.993 8.992a1.496 1.496 0 0 0-.439 1.062 1.5 1.5 0 0 0 2.56 1.061l11.553-11.553c.141-.141.25-.308.327-.492.003-.008.004-.016.007-.022a1.483 1.483 0 0 0 0-1.095l-.007-.021a1.493 1.493 0 0 0-.328-.493L51.032 37.386a1.5 1.5 0 0 0-2.559 1.061z"/></svg>');mask-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M48.501 27.015a1.5 1.5 0 0 0 1.5 1.5h21.486v42.974H50.001a1.5 1.5 0 1 0 0 3h22.986a1.5 1.5 0 0 0 1.5-1.5V27.013a1.5 1.5 0 0 0-1.5-1.5H50.001c-.829.002-1.5.674-1.5 1.502zm-.028 11.432c0 .384.146.768.438 1.061l8.964 8.963h-30.86a1.5 1.5 0 1 0 0 3h30.86l-8.993 8.992a1.496 1.496 0 0 0-.439 1.062 1.5 1.5 0 0 0 2.56 1.061l11.553-11.553c.141-.141.25-.308.327-.492.003-.008.004-.016.007-.022a1.483 1.483 0 0 0 0-1.095l-.007-.021a1.493 1.493 0 0 0-.328-.493L51.032 37.386a1.5 1.5 0 0 0-2.559 1.061z"/></svg>')}::content .logo{float:left;max-height:60px;padding-left:1em;padding-right:2em;line-height:60px;padding-top:0;background-color:transparent;color:#00abf2;text-decoration:none;transition:color .1s linear}::content .logo img{box-sizing:content-box;padding:1.2em 0;height:20px}::content .logo>span{display:block;float:right;margin-left:10px}::content .logo img{padding:1.2em 0}::content li.nav-link{background:transparent;display:inline;line-height:60px;text-decoration:none;width:auto}::content li.nav-link a{padding-right:1em;color:hsla(0,0%,100%,.7);display:inline-block;text-decoration:none}
        /* endinject */
    </style>
</template>

<script>
{
    /* inject:js */
    "use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),template=document.currentScript.ownerDocument.querySelector("template"),availableLanguages=["de","en"],state={tokenName:"zalando-internal-access_token",stateName:"zalando-internal-access_state",languageName:"language",cookiePath:"/",cookieDomain:".zalan.do",lang:null,loggedIn:null,clientId:null,redirectUrl:null,userServiceUrl:null,tokenInfoUrl:null},urlAtStart=window.location.href,WSHeader=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"createdCallback",value:function(){var e=this,t=document.importNode(template.content,!0);this.createShadowRoot().appendChild(t),this.state=state,this.getAttributes(),this.setupLanguages(),document.addEventListener("DOMContentLoaded",function(){var t=e.getLanguage();e.setLanguage(t),e.checkIsLoggedIn().then(function(){return e.getUser()}).then(function(){return e.showUser()})["catch"](function(){return e.propagateError("Getting Token-/User-Info failed!")})})}},{key:"propagateError",value:function(e){var t=new CustomEvent("error",{detail:{message:e}});this.dispatchEvent(t)}},{key:"getAttributes",value:function(){this.state=Object.assign({},this.state,{clientId:this.getAttribute("client-id"),redirectUrl:this.getAttribute("redirect-url"),userServiceUrl:this.getAttribute("userservice-url"),tokenInfoUrl:this.getAttribute("tokeninfo-url")})}},{key:"setupLanguages",value:function(){var e=this,t=this.shadowRoot.querySelector("#languages");availableLanguages.map(function(n){var a=document.createElement("div");a.innerHTML='<li>\n                <a><span class="flag flag-'+n+'"></span> <span translate="global.language.{{lang}}">'+n+"</span></a>\n            </li>";var o=a.childNodes[0];o.addEventListener("click",function(){return e.setLanguage(n)}),t.appendChild(o)})}},{key:"getLanguage",value:function(){return this.state.lang||window.localStorage.getItem(this.state.languageName)||availableLanguages[0]}},{key:"setLanguage",value:function(e){this.state.lang!=e&&(this.state.lang=e,window.localStorage.setItem(this.state.languageName,e),this.showLanguage(e),this.propagateLanguageChange(e))}},{key:"showLanguage",value:function(e){this.shadowRoot.querySelector("#selectedLanguageFlag").className="flag flag-"+e,this.shadowRoot.querySelector("#selectedLanguage").innerText=e}},{key:"propagateLanguageChange",value:function(e){var t=new CustomEvent("language-changed",{detail:{language:e}});this.dispatchEvent(t)}},{key:"login",value:function(){var e="https://auth.zalando.com/z/oauth2/authorize?realm=employees&response_type=token&scope=uid&client_id="+this.state.clientId+"&redirect_uri="+this.state.redirectUrl+"&state="+this.setSessionState();window.location.href=e}},{key:"logout",value:function(){this.removeCookie(),this.showLoggedOut(),this.propagateLoginStatusChange(!1)}},{key:"checkIsLoggedIn",value:function(){var e=this;return new Promise(function(t,n){e.getToken(urlAtStart).then(function(a){e.getTokenInfo().then(function(){e.showLoggedIn(),e.propagateLoginStatusChange(!0,a),t()},function(){e.showLoggedOut(),e.propagateLoginStatusChange(!1),n()})})})}},{key:"propagateLoginStatusChange",value:function(e,t){if(this.state.loggedIn!==e){this.state.loggedIn=e;var n=new CustomEvent("login-status-changed",{detail:{loggedIn:e,token:t||null}});this.dispatchEvent(n)}}},{key:"showLoggedOut",value:function(){var e=this.shadowRoot.querySelector("#loggedInInfo");e.innerHTML='<a class="auto-size"><span translate="global.menu.signein">Login</span></i></a>',e.removeEventListener("click",this.logout),e.addEventListener("click",this.login.bind(this))}},{key:"showLoggedIn",value:function(){var e=this.shadowRoot.querySelector("#loggedInInfo");e.innerHTML='<span translate="global.menu.signedinas"></span>\n            <span id="userName">Loading...</span>\n            <a class="auto-size" id="logOutButton" type="button"><div id="logOutIcon"></div></a>',e.removeEventListener("click",this.login),e.addEventListener("click",this.logout.bind(this))}},{key:"setSessionState",value:function(){var e=this.guid();return window.localStorage.setItem(this.state.stateName,e),e}},{key:"checkSessionState",value:function(e){var t=window.localStorage.getItem(this.state.stateName)===e;return window.localStorage.removeItem(this.state.stateName),t}},{key:"getToken",value:function(e){var t=this;return e||(e=window.location.href),new Promise(function(n,a){var o=t.getTokenFromUrl(e);if(o){var r=t.getStateFromUrl(e);if(t.checkSessionState(r))return t.setCookie(o),n(o)}return(o=t.getCookieValue(t.state.tokenName))?(t.setCookie(o),n(o)):void a()})}},{key:"getTokenFromUrl",value:function(e){var t=/access_token=([^&]+)/.exec(e);return null!=t?t[1]:null}},{key:"getStateFromUrl",value:function(e){var t=/state=([^&]+)/.exec(e);return t[1]}},{key:"getTokenInfo",value:function(){var e=this;return new Promise(function(t,n){e.request("GET",e.state.tokenInfoUrl).then(function(n){e.state=Object.assign({},e.state,{userUID:n.uid}),t(n.uid)},function(){e.logout(),n()})})}},{key:"getUser",value:function(){var e=this;return new Promise(function(t,n){e.request("GET",e.state.userServiceUrl+"?q="+e.state.userUID).then(function(a){var o=a[0];o||n();var r={userName:o.name,userEmail:o.email};e.state=Object.assign({},e.state,r),t(r)},function(){e.logout(),n()})})}},{key:"showUser",value:function(){this.shadowRoot.querySelector("#userName").innerText=this.state.userName}},{key:"setCookie",value:function(e){document.cookie=this.state.tokenName+"="+e+";path="+this.state.cookiePath+";"}},{key:"removeCookie",value:function(){document.cookie=this.state.tokenName+"=;path="+this.state.cookiePath+";domain="+this.state.cookieDomain+';expires=Thu, 01 Jan 1970 00:00:01 GMT";'}},{key:"getCookieValue",value:function(e){var t=document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)");return t?t.pop():""}},{key:"guid",value:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return""+e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},{key:"request",value:function(e,t){var n=new Headers;return this.getToken(urlAtStart).then(function(e){return n.append("Authorization","Bearer "+e),Promise.resolve()}).then(function(){return fetch(t,{method:e,headers:n,mode:"cors",cache:"default"}).then(checkStatus).then(function(e){return e.json()})})}},{key:"checkStatus",value:function(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}},{key:"attachedCallback",value:function(){}},{key:"detachedCallback",value:function(){}},{key:"attributeChangedCallback",value:function(e,t,n){switch(e){case"redirect-url":case"client-id":case"userservice-url":this.getAttributes()}}}]),t}(HTMLElement);document.registerElement("ws-header",WSHeader);
    /* endinject */
}
</script>
